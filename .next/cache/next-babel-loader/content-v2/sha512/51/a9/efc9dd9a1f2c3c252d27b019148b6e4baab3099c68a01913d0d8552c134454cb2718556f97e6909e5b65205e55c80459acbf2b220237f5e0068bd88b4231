{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _classCallCheck from \"/home/meddou/projects/perso/meddou.com/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/meddou/projects/perso/meddou.com/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/meddou/projects/perso/meddou.com/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/meddou/projects/perso/meddou.com/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/meddou/projects/perso/meddou.com/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/meddou/projects/perso/meddou.com/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/home/meddou/projects/perso/meddou.com/src/component/zoomable/Zoomable.jsx\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport './Zoomable.css';\n\nvar Zoomable = /*#__PURE__*/function (_Component) {\n  _inherits(Zoomable, _Component);\n\n  var _super = _createSuper(Zoomable);\n\n  function Zoomable() {\n    var _this;\n\n    _classCallCheck(this, Zoomable);\n\n    _this = _super.call(this);\n    _this.containerRef = /*#__PURE__*/React.createRef();\n    _this.transitionDuration = 300;\n    _this.copiedElement = undefined;\n    _this.currentClickListener = undefined;\n    _this.scaleFactor = undefined;\n    _this.reelElementWidth = undefined;\n    _this.reelElementHeight = undefined;\n    _this.state = {\n      isZoom: false\n    };\n    _this.zoomOrNot = _this.zoomOrNot.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Zoomable, [{\n    key: \"zoomOrNot\",\n    value: function zoomOrNot(event) {\n      var isZoom = this.state.isZoom;\n\n      if (isZoom) {\n        this.unzoom();\n      } else {\n        this.zoom(event);\n      }\n    }\n  }, {\n    key: \"unzoom\",\n    value: function unzoom() {\n      var _this2 = this;\n\n      if (this.copiedElement) {\n        this.copiedElement.style.transform = 'none';\n        this.copiedElement.firstChild.style.transform = 'none';\n        setTimeout(function () {\n          if (_this2.copiedElement.remove) {\n            _this2.copiedElement.remove();\n          } else if (_this2.copiedElement.parentNode) {\n            _this2.copiedElement.parentNode.removeChild(_this2.copiedElement);\n          }\n        }, this.transitionDuration);\n      }\n\n      this.setState({\n        isZoom: false\n      });\n    }\n  }, {\n    key: \"zoom\",\n    value: function zoom(event) {\n      var _this3 = this;\n\n      event.stopPropagation();\n      var reelElement = this.containerRef.current;\n      var absolutePosition = reelElement.getBoundingClientRect();\n      this.copiedElement = reelElement.cloneNode(true);\n      var scaledHeight = reelElement.clientHeight;\n      var scaledWidth = reelElement.clientWidth;\n      this.reelElementHeight = reelElement.clientHeight;\n      this.reelElementWidth = reelElement.clientWidth;\n      var self = this;\n      var windowWidth = window.innerWidth || window.innerWidth || document.documentElement.clientWidth;\n      var windowHeight = window.innerHeight || window.innerHeight || document.documentElement.clientHeight;\n      this.scaleFactor = windowWidth * 0.7 / reelElement.offsetWidth;\n      this.copiedElement.classList.add('zoomed');\n      this.copiedElement.style.left = \"\".concat(absolutePosition.left, \"px\");\n      this.copiedElement.style.top = \"\".concat(absolutePosition.top, \"px\");\n      this.copiedElement.style.height = \"\".concat(reelElement.clientHeight, \"px\");\n      this.copiedElement.style.width = \"\".concat(reelElement.clientWidth, \"px\");\n      this.currentClickListener = window.addEventListener('click', function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n        window.removeEventListener('click', _this3);\n        self.unzoom();\n        return false;\n      });\n      document.getElementsByTagName('body')[0].appendChild(this.copiedElement);\n      this.setState({\n        isZoom: true\n      });\n      setTimeout(function () {\n        if (_this3.copiedElement.firstChild) {\n          _this3.copiedElement.firstChild.style.transform = \"scale(\".concat(_this3.scaleFactor, \")\");\n        }\n\n        _this3.copiedElement.style.transform = \"\\n                translate(\\n                    calc((\".concat(windowWidth / 2, \"px - \").concat(absolutePosition.left, \"px - \").concat(scaledWidth / 2, \"px)),\\n                    calc((\").concat(windowHeight / 2, \"px - \").concat(absolutePosition.top, \"px - \").concat(scaledHeight / 2, \"px))\\n                )\\n            \");\n      }, 0);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          children = _this$props.children,\n          closeButton = _this$props.closeButton;\n      var isZoom = this.state.isZoom;\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.zoomOrNot,\n          className: \"zoomable-container\",\n          ref: this.containerRef,\n          type: \"submit\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"zoomable-sub-container\",\n            children: [children, /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"zoomable-close-button\",\n              children: closeButton\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 9\n        }, this), isZoom && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"zoomable-background\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 20\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return Zoomable;\n}(Component);\n\nexport default Zoomable;","map":{"version":3,"sources":["/home/meddou/projects/perso/meddou.com/src/component/zoomable/Zoomable.jsx"],"names":["React","Component","Zoomable","containerRef","createRef","transitionDuration","copiedElement","undefined","currentClickListener","scaleFactor","reelElementWidth","reelElementHeight","state","isZoom","zoomOrNot","bind","event","unzoom","zoom","style","transform","firstChild","setTimeout","remove","parentNode","removeChild","setState","stopPropagation","reelElement","current","absolutePosition","getBoundingClientRect","cloneNode","scaledHeight","clientHeight","scaledWidth","clientWidth","self","windowWidth","window","innerWidth","document","documentElement","windowHeight","innerHeight","offsetWidth","classList","add","left","top","height","width","addEventListener","e","preventDefault","removeEventListener","getElementsByTagName","appendChild","props","children","closeButton"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\n\r\nimport './Zoomable.css'\r\n\r\nclass Zoomable extends Component {\r\n  constructor() {\r\n    super()\r\n    this.containerRef = React.createRef()\r\n\r\n    this.transitionDuration = 300\r\n\r\n    this.copiedElement = undefined\r\n    this.currentClickListener = undefined\r\n    this.scaleFactor = undefined\r\n    this.reelElementWidth = undefined\r\n    this.reelElementHeight = undefined\r\n\r\n    this.state = {\r\n      isZoom: false,\r\n    }\r\n    this.zoomOrNot = this.zoomOrNot.bind(this)\r\n  }\r\n\r\n  zoomOrNot(event) {\r\n    const { isZoom } = this.state\r\n\r\n    if (isZoom) {\r\n      this.unzoom()\r\n    } else {\r\n      this.zoom(event)\r\n    }\r\n  }\r\n\r\n  unzoom() {\r\n    if (this.copiedElement) {\r\n      this.copiedElement.style.transform = 'none'\r\n      this.copiedElement.firstChild.style.transform = 'none'\r\n      setTimeout(() => {\r\n        if (this.copiedElement.remove) {\r\n          this.copiedElement.remove()\r\n        } else if (this.copiedElement.parentNode) {\r\n          this.copiedElement.parentNode.removeChild(this.copiedElement)\r\n        }\r\n      }, this.transitionDuration)\r\n    }\r\n    this.setState({\r\n      isZoom: false,\r\n    })\r\n  }\r\n\r\n  zoom(event) {\r\n    event.stopPropagation()\r\n    const reelElement = this.containerRef.current\r\n    const absolutePosition = reelElement.getBoundingClientRect();\r\n    this.copiedElement = reelElement.cloneNode(true)\r\n    const scaledHeight = reelElement.clientHeight\r\n    const scaledWidth = reelElement.clientWidth\r\n    this.reelElementHeight = reelElement.clientHeight\r\n    this.reelElementWidth = reelElement.clientWidth\r\n    const self = this\r\n\r\n    const windowWidth = window.innerWidth\r\n      || window.innerWidth || document.documentElement.clientWidth\r\n    const windowHeight = window.innerHeight\r\n      || window.innerHeight || document.documentElement.clientHeight\r\n\r\n    this.scaleFactor = (windowWidth * 0.7) / reelElement.offsetWidth\r\n\r\n    this.copiedElement.classList.add('zoomed')\r\n    this.copiedElement.style.left = `${absolutePosition.left}px`\r\n    this.copiedElement.style.top = `${absolutePosition.top}px`\r\n    this.copiedElement.style.height = `${reelElement.clientHeight}px`\r\n    this.copiedElement.style.width = `${reelElement.clientWidth}px`\r\n\r\n    this.currentClickListener = window.addEventListener('click', (e) => {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      window.removeEventListener('click', this)\r\n      self.unzoom()\r\n      return false\r\n    })\r\n\r\n    document.getElementsByTagName('body')[0].appendChild(this.copiedElement)\r\n    this.setState({ isZoom: true })\r\n    setTimeout(() => {\r\n      if (this.copiedElement.firstChild) {\r\n        this.copiedElement.firstChild.style.transform = `scale(${this.scaleFactor})`\r\n      }\r\n\r\n      this.copiedElement.style.transform = `\r\n                translate(\r\n                    calc((${windowWidth / 2}px - ${absolutePosition.left}px - ${scaledWidth / 2}px)),\r\n                    calc((${windowHeight / 2}px - ${absolutePosition.top}px - ${scaledHeight / 2}px))\r\n                )\r\n            `\r\n    }, 0)\r\n  }\r\n\r\n  render() {\r\n    const { children, closeButton } = this.props\r\n    const { isZoom } = this.state\r\n\r\n    return (\r\n      <span>\r\n        <button onClick={this.zoomOrNot} className=\"zoomable-container\" ref={this.containerRef} type=\"submit\">\r\n          <div className=\"zoomable-sub-container\">\r\n            {children}\r\n            <span className=\"zoomable-close-button\">\r\n              {closeButton}\r\n            </span>\r\n          </div>\r\n        </button>\r\n        { isZoom\r\n                && <span className=\"zoomable-background\" />}\r\n      </span>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Zoomable\r\n"]},"metadata":{},"sourceType":"module"}